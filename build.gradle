buildscript {
    ext {
        springBootVersion = '1.3.0.RELEASE'
    }
    repositories {
        jcenter()
    }
    dependencies {
        classpath "org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}" 
    }
}

defaultTasks 'build'

apply plugin: 'java'
apply plugin: 'application'
apply plugin: 'spring-boot'

archivesBaseName = 'leaderboard'
mainClassName = 'com.github.twostone.leaderboard.LeaderboardMain'

version = "1.0.0"
group = 'com.github.twostone.leaderboard'

ext {
    if (project.hasProperty('useBintrayVersion')) {
        project.useBintrayVersion = true
    } else {
        ext.useBintrayVersion = false
    }
}

allprojects {
	repositories {
		jcenter()
		maven {
			url 'http://maven.vaadin.com/vaadin-addons'
		}
	}
	
/*	configurations.all {
  		resolutionStrategy {
  			failOnVersionConflict()
  		
  			force 'commons-logging:commons-logging:1.2',
  				'org.eclipse.jetty.websocket:websocket-client:9.3.0.v20150612',
  				'org.eclipse.jetty.websocket:websocket-common:9.3.0.v20150612',
  				'org.eclipse.jetty.websocket:websocket-servlet:9.3.0.v20150612'
  		}
	}*/
	
	apply from: rootProject.file('gradle/java.gradle')
    apply from: rootProject.file('gradle/codeQuality.gradle')
	
	repositories {
		jcenter()
	}
	
	dependencies {
		compile 'org.springframework:spring-core'
		compile 'javax.inject:javax.inject:1'
		compile 'com.google.guava:guava:19.0'
	}
}

subprojects {

    version = rootProject.version
    group = rootProject.group
}

dependencies {
    compile project(':core')
    compile project(':webapp')
    
    compile 'org.springframework.boot:spring-boot-starter-web'
    
    runtime 'com.h2database:h2'
}

task wrapper(type: Wrapper) {
	gradleVersion = '2.10-rc-1'
}

task stage { }
